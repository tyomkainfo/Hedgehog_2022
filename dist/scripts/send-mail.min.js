const form=document.querySelector("#form");async function formSend(e){e.preventDefault();let r=formValidate(form),o=new FormData(form);if(0===r){document.querySelector("body").classList.add("_sending");let e=await fetch("sendmail.php",{method:"POST",body:o});if(e.ok){let r=await e.json();alert(r.message),form.reset(),document.querySelector("body").classList.remove("_sending")}else document.querySelector("body").classList.remove("_sending")}}function formValidate(e){let r=0;return document.querySelectorAll("._req").forEach(e=>{formRemoveError(e),e.classList.contains("_email")?emailTest(e)&&(formAddError(e),r++):""===e.value&&(formAddError(e),r++)}),r}function formAddError(e){e.classList.add("_error")}function formRemoveError(e){e.classList.remove("_error")}function emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}form.addEventListener("submit",formSend);